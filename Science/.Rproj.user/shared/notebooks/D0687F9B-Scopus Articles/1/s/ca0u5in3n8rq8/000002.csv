"0",""
"0","if (""article_count.csv"" %in% files){"
"0","  article_count <- read.csv(""article_count.csv"")"
"0","} else {"
"0","  #create empty data frame"
"0","  article_count <- tibble(year = c(year_start:year_end), n=0)"
"0",""
"0","  #run search by year"
"0","  for (i in 1:nrow(article_count)){"
"0","    year = article_count$year[i]"
"0","    call <- paste0(url,""%28+"",query,""+AND+PUBYEAR+IS+"",year,""+%29&apikey="",key)"
"0","    ans <- fromJSON(call)"
"0","    article_count$n[i] <- as.integer(ans$`search-results`$`opensearch:totalResults`) "
"0","  }"
"0","  "
"0","  #join to total scopus counts"
"0","  article_count <- article_count%>%"
"0","    left_join(total_articles)%>%"
"0","    mutate(prop = n/total)"
"0","  #save file"
"0","  write.csv(article_count, ""article_count.csv"")"
"0","}"
